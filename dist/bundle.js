(()=>{"use strict";const e=function(e,a){fetch(`${e}&appid=df7ac5c99d7c7f788e64ec68ba2508a3`).then((e=>e.json())).then((e=>a(e)))},a=(e,a)=>`https://api.openweathermap.org/data/2.5/weather?${e}&${a}&units=metric`,s=(e,a)=>`http://api.openweathermap.org/data/2.5/air_pollution?${e}&${a}`,n=(e,a)=>`http://api.openweathermap.org/geo/1.0/reverse?${e}&${a}&limit=5`,t=e=>`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=5`,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=function(e,a){const s=new Date(1e3*a),n=s.getUTCHours();return`${n%12||12}:${s.getUTCMinutes()} ${n>12?"PM":"AM"}`},r={1:{level:"Good",message:"Air quality is considered satisfactory, and air pollution poses little or no risk."},2:{level:"Fair",message:"Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution."},3:{level:"Moderate",message:"Members of sensitive groups may experience health effects. The General public is not likely to be affected."},4:{level:"Poor",message:"Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects."},5:{level:"Very Poor",message:"Health warnings of emergence conditions. The entire population is more likely to be affected."}},o=function(e,a,s){for(const n of e)n.addEventListener(a,s)},d=document.querySelector("[data-search-view]"),p=document.querySelectorAll("[data-search-toggler]"),u=()=>d.classList.toggle("active");o(p,"click",u);const h=document.querySelector("[data-search-field]"),m=document.querySelector("[data-search-result]");let v=null;h.addEventListener("input",(function(){v??clearTimeout(v),h.value?h.classList.add("searching"):(m.classList.remove("active"),m.innerHTML="",h.classList.remove("searching")),h.value&&(v=setTimeout((()=>{e(t(h.value),(function(e){h.classList.remove("searching"),m.classList.add("active"),m.innerHTML='\n                <ul class="view-list" data-search-list></ul>\n                ';const a=[];for(const{name:s,lat:n,lon:t,country:i,state:l}of e){const e=document.createElement("li");e.classList.add("view-item"),e.innerHTML=`\n                        <span class="m-icon">location_on</span>\n                        <div>\n                            <p class="item-title">${s}</p>      \n                            <p class="label-2 item-subtitle">${l||""} ${i}</p>\n                        </div>\n                        <a href="#/weather?lat=${n}&lon=${t}" class="item-link has-state" aria-label="${s} weather" data-search-toggler></a>\n                    `,m.querySelector("[data-search-list]").appendChild(e),a.push(e.querySelector("[data-search-toggler]"))}o(a,"click",(function(){u(),m.classList.remove("active")}))}))}),500))})),document.querySelector("[data-container]"),document.querySelector("[data-loading]");const g=document.querySelector("[data-current-location-btn]"),y=document.querySelector("[data-error-content]"),w=function(t,o){y.style.display="none";const d=document.querySelector("[data-current-weather]"),p=document.querySelector("[data-highlights]"),u=document.querySelector("[data-hourly-forecast]"),h=document.querySelector("[data-5-day-forecast]");d.innerHTML="",p.innerHTML="",u.innerHTML="",h.innerHTML="","#/current-location"===window.location.hash?g.setAttribute("disabled",""):g.removeAttribute("disabled"),e(a(t,o),(function(a){const{weather:u,dt:h,sys:{sunrise:m,sunset:v},main:{temp:g,feels_like:y,pressure:w,humidity:b},visibility:f,timezone:$}=a,[{description:L,icon:S}]=u,T=document.createElement("div");T.classList.add("card","card-lg","current-weather-card"),T.innerHTML=`\n            <h2 class="title-2 card-title">Now</h2>\n                <div class="weapper">\n                    <p class="heading">${parseInt(g)}&deg;<sup>C</sup></p>\n                    <img src="src/images/weather_icons/${S}.png" width="64" height="64" alt="${L}"\n                         class="weather-icon" />\n                </div>\n                <p class="body-3">${L}</p>\n            <ul class="meta-list">\n                <li class="meta-item">\n                    <span class="m-icon">calendar_today</span>\n                    <p class="title-3 meta-text">${function(e,a){const s=new Date(1e3*(e+a)),n=i[s.getUTCDay()],t=l[s.getUTCMonth()];return`${n} ${s.getUTCDate()}, ${t}}`}(h,$)}</p>\n                </li>\n                <li class="meta-item">\n                    <span class="m-icon">location_on</span>\n                    <p class="title-3 meta-text" data-location></p>\n                </li>\n            </ul>\n            `,e(n(t,o),(function([{name:e,country:a}]){T.querySelector("[data-location]").innerHTML=`${e}, ${a}`})),d.appendChild(T),e(s(t,o),(function(e){const[{main:{aqi:a},components:{no2:s,o3:n,so2:t,pm2_5:i}}]=e.list,l=document.createElement("div");l.classList.add("card","card-lg"),l.innerHTML=`\n          <h2 class="title-2" id="highlights-label">\n            Today Highlights\n          </h2>\n      <div class="highlights-list">\n          <div class="card card-sm highlights-card one">\n              <h3 class="title-3">Air Quality Index</h3>\n              <div class="wrapper">\n                  <span class="m-icon">air</span>\n                  <ul class="card-list">\n                      <li class="card-item">\n                          <p class="title-1">${i.toPrecision(3)}</p>\n                          <p class="label-1">\n                              PM<sub>2.5</sub>\n                          </p>\n                      </li>\n                      <li class="card-item">\n                          <p class="title-1">${t.toPrecision(3)}</p>\n                          <p class="label-1">SO<sub>2.5</sub>\n                          </p>\n                      </li>\n                      <li class="card-item">\n                          <p class="title-1">${s.toPrecision(3)}</p>\n                          <p class="label-1">NO<sub>2</sub></p>\n                      </li>\n                      <li class="card-item">\n                          <p class="title-1">${n.toPrecision(3)}</p>\n                          <p class="label-1">O<sub>3</sub>\n                          </p>\n                      </li>\n                  </ul>\n              </div>\n              <span class="badge aqi-${a} label-${a}" title="${r[a].message}">\n                ${r[a].level}\n              </span>\n          </div>\n          <div class="card card-sm highlights-card two">\n              <h3 class="title-3">Sunrise & Sunset</h3>\n              <div class="card-list">\n                  <div class="card-item">\n                      <span class="m-icon">clear_day</span>\n                      <div>\n                          <p class="label-1">Sunrise</p>\n                          <p class="title-1">${c(0,$)}</p>\n                      </div>\n                  </div>\n                  <div class="card-item">\n                      <span class="m-icon">clear_night</span>\n                      <div>\n                          <p class="label-1">Sunset</p>\n                          <p class="title-1">${c(0,$)}</p>\n                      </div>\n                  </div>\n              </div>\n          </div>\n          <div class="card card-sm highlights-card">\n              <h3 class="title3">Humidity</h3>\n              <div class="wrapper">\n                  <span class="m-icon">humidity_percentage</span>\n                  <p class="title-1">${b}<sub>%</sub></p>\n              </div>\n          </div>\n          <div class="card card-sm highlights-card">\n              <h3 class="title3">Pressure</h3>\n              <div class="wrapper">\n                  <span class="m-icon">airwave</span>\n                  <p class="title-1">${w}<sup>hPa</sup>\n                  </p>\n              </div>\n          </div>\n          <div class="card card-sm highlights-card">\n              <h3 class="title3">Visibility</h3>\n              <div class="wrapper">\n                  <span class="m-icon">visibility</span>\n                  <p class="title-1">${f/1e3}<sub>km</sub></p>\n              </div>\n          </div>\n          <div class="card card-sm highlights-card">\n              <h3 class="title3">Feels Like</h3>\n              <div class="wrapper">\n                  <span class="m-icon">thermostat</span>\n                  <p class="title-1">${parseInt(y)}&deg;<sup>c</sup>\n                  </p>\n              </div>\n          </div>\n      </div>\n          `,p.appendChild(l)}))}))},b=new Map([["/current-location",function(){window.navigator.geolocation.getCurrentPosition((e=>{const{latitude:a,longitude:s}=e.coords;w(`lat=${a}`,`lon=${s}`)}),(e=>{window.location.hash="#/weather?lat=50.450001&lon=30.523333"}))}],["/weather",e=>w(...e.split("&"))]]),f=function(){const e=window.location.hash.slice(1),[a,s]=e.includes?e.split("?"):[e];b.get(a)&&b.get(a)(s)};window.addEventListener("hashchange",f),window.addEventListener("load",(function(){window.location.hash?f():window.location.hash="#/current-location"}))})();