(()=>{"use strict";const e=function(e,t){fetch(`${e}&appid=df7ac5c99d7c7f788e64ec68ba2508a3`).then((e=>e.json())).then((e=>t(e)))},t=(e,t)=>`https://api.openweathermap.org/data/2.5/weather?${e}&${t}&units=metric`,a=(e,t)=>`http://api.openweathermap.org/geo/1.0/reverse?${e}&${t}&limit=5`,n=e=>`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=5`,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e,t,a){for(const n of e)n.addEventListener(t,a)},s=document.querySelector("[data-search-view]"),r=document.querySelectorAll("[data-search-toggler]"),l=()=>s.classList.toggle("active");o(r,"click",l);const d=document.querySelector("[data-search-field]"),u=document.querySelector("[data-search-result]");let h=null;d.addEventListener("input",(function(){h??clearTimeout(h),d.value?d.classList.add("searching"):(u.classList.remove("active"),u.innerHTML="",d.classList.remove("searching")),d.value&&(h=setTimeout((()=>{e(n(d.value),(function(e){d.classList.remove("searching"),u.classList.add("active"),u.innerHTML='\n                <ul class="view-list" data-search-list></ul>\n                ';const t=[];for(const{name:a,lat:n,lon:i,country:c,state:o}of e){const e=document.createElement("li");e.classList.add("view-item"),e.innerHTML=`\n                        <span class="m-icon">location_on</span>\n                        <div>\n                            <p class="item-title">${a}</p>      \n                            <p class="label-2 item-subtitle">${o||""} ${c}</p>\n                        </div>\n                        <a href="#/weather?lat=${n}&lon=${i}" class="item-link has-state" aria-label="${a} weather" data-search-toggler></a>\n                    `,u.querySelector("[data-search-list]").appendChild(e),t.push(e.querySelector("[data-search-toggler]"))}o(t,"click",(function(){l(),u.classList.remove("active")}))}))}),500))}));const p=document.querySelector("[data-container]"),m=(document.querySelector("[data-loading]"),document.querySelector("[data-current-location-btn]")),w=document.querySelector("[data-error-content]"),g=function(n,o){p.style.overflowY="hidden",w.style.display="none";const s=document.querySelector("[data-current-weather]"),r=document.querySelector("[data-highlights]"),l=document.querySelector("[data-hourly-forecast]"),d=document.querySelector("[data-5-day-forecast]");s.innerHTML="",r.innerHTML="",l.innerHTML="",d.innerHTML="","#/current-location"===window.location.hash?m.setAttribute("disabled",""):m.removeAttribute("disabled"),e(t(n,o),(function(t){const{weather:r,dt:l,sys:{sunrise:d,sunset:u},main:{temp:h,feels_like:p,pressure:m,humidity:w},visibility:g,timezone:y}=t,[{description:v,icon:f}]=r,$=document.createElement("div");$.classList.add("card","card-lg","current-weather-card"),$.innerHTML=`\n            <h2 class="title-2 card-title">Now</h2>\n                <div class="weapper">\n                    <p class="heading">${parseInt(h)}&deg;<sup>C</sup></p>\n                    <img src="src/images/weather_icons/${f}.png" width="64" height="64" alt="${v}"\n                         class="weather-icon" />\n                </div>\n                <p class="body-3">${v}</p>\n            <ul class="meta-list">\n                <li class="meta-item">\n                    <span class="m-icon">calendar_today</span>\n                    <p class="title-3 meta-text">${function(e,t){const a=new Date(1e3*(e+t)),n=i[a.getUTCDay()],o=c[a.getUTCMonth()];return`${n} ${a.getUTCDate()}, ${o}}`}(l,y)}</p>\n                </li>\n                <li class="meta-item">\n                    <span class="m-icon">location_on</span>\n                    <p class="title-3 meta-text" data-location></p>\n                </li>\n            </ul>\n            `,e(a(n,o),(function([{name:e,country:t}]){$.querySelector("[data-location]").innerHTML=`${e}, ${t}`})),s.appendChild($)}))},y=new Map([["/current-location",function(){window.navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:a}=e.coords;g(`lat=${t}`,`lon=${a}`)}),(e=>{window.location.hash="#/weather?lat=50.450001&lon=30.523333"}))}],["/weather",e=>g(...e.split("&"))]]),v=function(){const e=window.location.hash.slice(1),[t,a]=e.includes?e.split("?"):[e];y.get(t)&&y.get(t)(a)};window.addEventListener("hashchange",v),window.addEventListener("load",(function(){window.location.hash?v():window.location.hash="#/current-location"}))})();